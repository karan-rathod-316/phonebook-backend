(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(n,t,e){},39:function(n,t,e){},40:function(n,t,e){"use strict";e.r(t);var a=e(1),i=e.n(a),o=e(14),c=e.n(o),r=e(3),s=(e(19),e(0));function u(n){var t=n.contacts,e=n.deleteContactHandler;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Numbers"}),t.map((function(n){return Object(s.jsxs)("p",{children:[n.name," ",n.number,Object(s.jsx)("button",{value:n.id,onClick:e,children:"Delete"})]},n.name)}))]})}function l(n){var t=n.addContactHandler,e=n.newName,a=n.nameInputHandler,i=n.newNumber,o=n.numberInputHandler;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Add a new number"}),Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:e,onChange:a})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:i,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})]})}function d(n){var t=n.searchInput,e=n.searchInputHandler,a=n.searchResult;return Object(s.jsxs)("div",{children:["Filter shown with",Object(s.jsx)("input",{value:t,onChange:e}),t&&a.map((function(n){return Object(s.jsxs)("p",{children:[n.name," ",n.number]},n.name)}))]})}var f=e(4),b=e.n(f),j="/api/contacts",h={getAll:function(){return b.a.get(j).then((function(n){return n.data}))},addContact:function(n){return b.a.post(j,n).then((function(n){return n.data}))},deleteContact:function(n){b.a.delete("".concat(j,"/").concat(n))},updateContact:function(n,t){return b.a.put("".concat(j,"/").concat(n),t).then((function(n){return n.data}))}};function m(n){var t=n.notificationMessage,e=n.notificationClass;return Object(s.jsx)("p",{className:e,children:t})}var p=function(){var n=Object(a.useState)([]),t=Object(r.a)(n,2),e=t[0],i=t[1];Object(a.useEffect)((function(){h.getAll().then((function(n){i(n)}))}),[]);var o=Object(a.useState)(""),c=Object(r.a)(o,2),f=c[0],b=c[1],j=Object(a.useState)(""),p=Object(r.a)(j,2),O=p[0],C=p[1],v=Object(a.useState)(""),g=Object(r.a)(v,2),x=g[0],w=g[1],M=Object(a.useState)({notificationMessage:null,notificationClass:null}),H=Object(r.a)(M,2),I=H[0],N=H[1],k=e.filter((function(n){return n.name.toLowerCase().includes(f.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"PhoneBook"}),Object(s.jsx)(m,{notificationMessage:I.notificationMessage,notificationClass:I.notificationClass}),Object(s.jsx)(d,{searchInput:f,searchInputHandler:function(n){b(n.target.value)},searchResult:k}),Object(s.jsx)(l,{addContactHandler:function(n){n.preventDefault();var t=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()&&n.number===x})),a=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()&&n.number!==x}));if(void 0!==t)return alert("".concat(O," is already added to the phonebook"));if(void 0!==a){var o=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()}));window.confirm("".concat(o.name," is already added to the phonebook, replace the old number with a new one?"))&&(h.updateContact(o.id,{name:O,number:x}).then((function(n){e.map((function(t){return t.id!==o.id?t:n}))})).then((function(){h.getAll().then((function(n){return i(n)}))})).catch((function(n){N({notificationMessage:"Information of ".concat(O," has already been removed from the server"),notificationClass:"error"}),setTimeout((function(){return N({notificationMessage:null,notificationClass:null})}),5e3)})),N({notificationMessage:"Updated ".concat(O),notificationClass:"updateNotification"}),setTimeout((function(){return N({notificationMessage:null,notificationClass:null})}),5e3))}else h.addContact({name:O,number:x}).then((function(n){i(e.concat(n)),N({notificationMessage:"Added ".concat(O),notificationClass:"addedNotification"})})).catch((function(n){N({notificationMessage:"".concat(n.response.data.error),notificationClass:"error"})})),setTimeout((function(){return N({notificationMessage:null,notificationClass:null})}),5e3)},newName:O,nameInputHandler:function(n){C(n.target.value)},newNumber:x,numberInputHandler:function(n){w(n.target.value)}}),Object(s.jsx)(u,{contacts:e,deleteContactHandler:function(n){var t=n.target.value,a=e.find((function(n){return n.id===t}));if(window.confirm("Delete ".concat(a.name," ?"))){h.deleteContact(t);var o=e.filter((function(n){return n.id!==t}));i(o),N({notificationMessage:"Deleted ".concat(a.name),notificationClass:"deleteNotification"}),setTimeout((function(){return N({notificationMessage:null,notificationClass:null})}),5e3)}}})]})};e(39);c.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e073bcfc.chunk.js.map