(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(n,t,e){},39:function(n,t,e){},40:function(n,t,e){"use strict";e.r(t);var a=e(1),i=e.n(a),o=e(14),c=e.n(o),r=e(3),u=(e(19),e(0));function s(n){var t=n.contacts,e=n.deleteContactHandler;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Numbers"}),t.map((function(n){return Object(u.jsxs)("p",{children:[n.name," ",n.number,Object(u.jsx)("button",{value:n.id,onClick:e,children:"Delete"})]},n.name)}))]})}function l(n){var t=n.addContactHandler,e=n.newName,a=n.nameInputHandler,i=n.newNumber,o=n.numberInputHandler;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add a new number"}),Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e,onChange:a})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:i,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})]})}function d(n){var t=n.searchInput,e=n.searchInputHandler,a=n.searchResult;return Object(u.jsxs)("div",{children:["Filter shown with",Object(u.jsx)("input",{value:t,onChange:e}),t&&a.map((function(n){return Object(u.jsxs)("p",{children:[n.name," ",n.number]},n.name)}))]})}var f=e(4),b=e.n(f),j="https://limitless-savannah-10535.herokuapp.com/api/contacts",h={getAll:function(){return b.a.get(j).then((function(n){return n.data}))},addContact:function(n){return b.a.post(j,n).then((function(n){return n.data}))},deleteContact:function(n){b.a.delete("".concat(j,"/").concat(n))},updateContact:function(n,t){return b.a.put("".concat(j,"/").concat(n),t).then((function(n){return n.data}))}};function m(n){var t=n.notificationMessage,e=n.notificationClass;return Object(u.jsx)("p",{className:e,children:t})}var p=function(){var n=Object(a.useState)([]),t=Object(r.a)(n,2),e=t[0],i=t[1];Object(a.useEffect)((function(){h.getAll().then((function(n){i(n)}))}),[]);var o=Object(a.useState)(""),c=Object(r.a)(o,2),f=c[0],b=c[1],j=Object(a.useState)(""),p=Object(r.a)(j,2),O=p[0],v=p[1],C=Object(a.useState)(""),x=Object(r.a)(C,2),g=x[0],w=x[1],M=Object(a.useState)({notificationMessage:null,notificationClass:null}),H=Object(r.a)(M,2),I=H[0],k=H[1],N=e.filter((function(n){return n.name.toLowerCase().includes(f.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"PhoneBook"}),Object(u.jsx)(m,{notificationMessage:I.notificationMessage,notificationClass:I.notificationClass}),Object(u.jsx)(d,{searchInput:f,searchInputHandler:function(n){b(n.target.value)},searchResult:N}),Object(u.jsx)(l,{addContactHandler:function(n){n.preventDefault();var t=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()&&n.number===g})),a=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()&&n.number!==g}));if(void 0!==t)return alert("".concat(O," is already added to the phonebook"));if(void 0!==a){var o=e.find((function(n){return n.name.toLowerCase()===O.toLowerCase()}));window.confirm("".concat(o.name," is already added to the phonebook, replace the old number with a new one?"))&&(h.updateContact(o.id,{name:O,number:g}).then((function(n){e.map((function(t){return t.id!==o.id?t:n}))})).then((function(){h.getAll().then((function(n){return i(n)}))})).catch((function(n){k({notificationMessage:"Information of ".concat(O," has already been removed from the server"),notificationClass:"error"}),setTimeout((function(){return k({notificationMessage:null,notificationClass:null})}),5e3)})),k({notificationMessage:"Updated ".concat(O),notificationClass:"updateNotification"}),setTimeout((function(){return k({notificationMessage:null,notificationClass:null})}),5e3))}else h.addContact({name:O,number:g}).then((function(n){return i(e.concat(n))})),k({notificationMessage:"Added ".concat(O),notificationClass:"addedNotification"}),setTimeout((function(){return k({notificationMessage:null,notificationClass:null})}),5e3)},newName:O,nameInputHandler:function(n){v(n.target.value)},newNumber:g,numberInputHandler:function(n){w(n.target.value)}}),Object(u.jsx)(s,{contacts:e,deleteContactHandler:function(n){var t=+n.target.value,a=e.find((function(n){return n.id===t}));if(window.confirm("Delete ".concat(a.name," ?"))){h.deleteContact(t);var o=e.filter((function(n){return n.id!==t}));i(o),k({notificationMessage:"Deleted ".concat(a.name),notificationClass:"deleteNotification"}),setTimeout((function(){return k({notificationMessage:null,notificationClass:null})}),5e3)}}})]})};e(39);c.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f7c9c4e7.chunk.js.map